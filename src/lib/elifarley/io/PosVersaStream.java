/* PosVersaStream -- A VersaStream which keeps track of its current position. * Copyright (C) 2001 Elifarley Callado Coelho  * This program is free software; you can redistribute it and/or * modify it under the terms of the GNU General Public License, version 2, * as published by the Free Software Foundation; * This program is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the * GNU General Public License for more details. * You should have received a copy of the GNU General Public License * along with this program; if not, write to the Free Software * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA. * See the file "COPYING" for the software license.  * Elifarley Callado Coelho * Belo Horizonte, Brazil * elifarley@yahoo.com * http://www.geocities.com/elifarley/ *  */ package elifarley.io;import java.io.IOException;public abstract class PosVersaStream extends VersaStream {	protected long pos = 0;		public final long getPosition() {		return pos;	}	public final void setPosition(long pos) {		if (pos < 0) throw new IllegalArgumentException("Can't position stream at " + pos);		this.pos = pos;		}	public final long seek(long offset, short origin) throws IOException {		long newPos;				switch(origin){			case FROM_BEGINNING: newPos = offset; break;			case FROM_CURRENT: newPos = pos + offset; break;			case FROM_END: newPos = getSize() + offset; break;			default: throw new IOException("Invalid origin: " + origin);		}				if (newPos < 0) throw new IOException("Can't position stream at " + newPos);		pos = newPos;		return pos;	}}